print("you can!!")
import login as login
from datetime import datetime
import time
import os
import time
import json
from niftystocks import ns
import math

high=[]
trades = 0



# print(login.fyers.get_profile())

print("LOGGED-IN")

# symbols = ['NSE:AXISBANK-EQ', 'NSE:BAJAJ-AUTO-EQ', 'NSE:BHARTIARTL-EQ', 'NSE:BPCL-EQ', 'NSE:CIPLA-EQ', 'NSE:COALINDIA-EQ', 'NSE:EICHERMOT-EQ', 'NSE:GRASIM-EQ', 'NSE:HCLTECH-EQ', 'NSE:HDFC-EQ', 'NSE:HDFCBANK-EQ', 'NSE:HDFCLIFE-EQ', 'NSE:HEROMOTOCO-EQ', 'NSE:HINDALCO-EQ', 'NSE:HINDUNILVR-EQ', 'NSE:ICICIBANK-EQ', 'NSE:INDUSINDBK-EQ', 'NSE:INFY-EQ', 'NSE:IOC-EQ', 'NSE:ITC-EQ', 'NSE:JSWSTEEL-EQ', 'NSE:KOTAKBANK-EQ', 'NSE:LT-EQ', 'NSE:M&M-EQ', 'NSE:NTPC-EQ', 'NSE:RELIANCE-EQ', 'NSE:SBILIFE-EQ', 'NSE:SBIN-EQ', 'NSE:SUNPHARMA-EQ', 'NSE:TATACONSUM-EQ', 'NSE:TATAMOTORS-EQ', 'NSE:TATASTEEL-EQ', 'NSE:TCS-EQ', 'NSE:TECHM-EQ', 'NSE:TITAN-EQ', 'NSE:UPL-EQ']

symbols= ['NSE:TATASTEEL-EQ']

# {'s': 'ok', 'code': 1101, 'message': 'Order Submitted Successfully. Your Order Ref. No. 23040600301708', 'id': '23040600301708-BO-1'}
# 

def buffer_price(equity_price):
    buffer = 0.001  # 0.1% buffer
    buffer_price = equity_price * (1 + buffer)
    buffer_price_rounded = round(buffer_price + 0.0005, 3)
    buffer_price_rounded = buffer_price_rounded - equity_price
    buffer_price_divisible = round(buffer_price_rounded * 20) / 20
    return buffer_price_divisible







def currentPosition():
    positions=login.fyers.positions()['netPositions']
    # [{'symbol': 'NSE:HDFCBANK-EQ', 'id': 'NSE:HDFCBANK-EQ-BO', 'buyAvg': 1660.3307692307694, 'buyQty': 26, 'buyVal': 43168.6, 'sellAvg': 1656.3115384615385, 'sellQty': 26, 'sellVal': 43064.1, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -104.50000000000455, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 1663.9, 'fyToken': '10100000001333', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 26, 'cfBuyQty': 0, 'daySellQty': 26, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -104.50000000000455, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:MARUTI-EQ', 'id': 'NSE:MARUTI-EQ-BO', 'buyAvg': 8408.55, 'buyQty': 1, 'buyVal': 8408.55, 'sellAvg': 8381.9, 'sellQty': 1, 'sellVal': 8381.9, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -26.649999999999636, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 8487.3, 'fyToken': '101000000010999', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 1, 'cfBuyQty': 0, 'daySellQty': 1, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -26.649999999999636, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:POWERGRID-EQ', 'id': 'NSE:POWERGRID-EQ-BO', 'buyAvg': 227.2, 'buyQty': 45, 'buyVal': 10224, 'sellAvg': 226.4, 'sellQty': 45, 'sellVal': 10188, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -35.99999999999923, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 225.1, 'fyToken': '101000000014977', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 45, 'cfBuyQty': 0, 'daySellQty': 45, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -35.99999999999923, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:HDFC-EQ', 'id': 'NSE:HDFC-EQ-BO', 'buyAvg': 2713.285714285714, 'buyQty': 14, 'buyVal': 37986, 'sellAvg': 2709.3142857142857, 'sellQty': 14, 'sellVal': 37930.4, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -55.599999999999454, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 2719.65, 'fyToken': '10100000001330', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 14, 'cfBuyQty': 0, 'daySellQty': 14, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -55.599999999999454, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:NIFTY2341317600PE', 'id': 'NSE:NIFTY2341317600PE-BO', 'buyAvg': 119.5, 'buyQty': 50, 'buyVal': 5975, 'sellAvg': 113.8, 'sellQty': 50, 'sellVal': 5690, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -285.0000000000001, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 105.1, 'fyToken': '101123041349141', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -285.0000000000001, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:TATAMOTORS-EQ', 'id': 'NSE:TATAMOTORS-EQ-BO', 'buyAvg': 438.45, 'buyQty': 1, 'buyVal': 438.45, 'sellAvg': 0, 'sellQty': 0, 'sellVal': 0, 'netAvg': 438.45, 'netQty': 1, 'side': 1, 'qty': 1, 'productType': 'BO', 'realized_profit': 0, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 436.8, 'fyToken': '10100000003456', 'exchange': '10', 'unrealized_profit': -1.6499999999999773, 'dayBuyQty': 1, 'cfBuyQty': 0, 'daySellQty': 0, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -1.6499999999999773, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:SBIN-EQ', 'id': 'NSE:SBIN-EQ-BO', 'buyAvg': 531.2753581661891, 'buyQty': 349, 'buyVal': 185415.1, 'sellAvg': 530.8627507163324, 'sellQty': 349, 'sellVal': 185271.1, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -144.0000000000059, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 527.35, 'fyToken': '10100000003045', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 349, 'cfBuyQty': 0, 'daySellQty': 349, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -144.0000000000059, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:BANKNIFTY2341340700PE', 'id': 'NSE:BANKNIFTY2341340700PE-BO', 'buyAvg': 243, 'buyQty': 25, 'buyVal': 6075, 'sellAvg': 229.45, 'sellQty': 25, 'sellVal': 5736.25, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -338.7500000000003, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 157.4, 'fyToken': '101123041348790', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 25, 'cfBuyQty': 0, 'daySellQty': 25, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -338.7500000000003, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:BANKNIFTY2341341000CE', 'id': 'NSE:BANKNIFTY2341341000CE-BO', 'buyAvg': 406.6, 'buyQty': 50, 'buyVal': 20330, 'sellAvg': 408.575, 'sellQty': 50, 'sellVal': 20428.75, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': 98.7499999999983, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 310.55, 'fyToken': '101123041348798', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': 98.7499999999983, 'slNo': 0, 'avgPrice': 0}]
    current=positions
    # all active{'symbol': 'NSE:BANKNIFTY2341341000CE', 'id': 'NSE:BANKNIFTY2341341000CE-BO', 'buyAvg': 406.6, 'buyQty': 50, 'buyVal': 20330, 'sellAvg': 408.575, 'sellQty': 50, 'sellVal': 20428.75, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': 98.7499999999983, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 313.65, 'fyToken': '101123041348798', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': 98.7499999999983, 'slNo': 0, 'avgPrice': 0}
# [{'symbol': 'NSE:BANKNIFTY2341340700PE', 'id': 'NSE:BANKNIFTY2341340700PE-BO', 'buyAvg': 243, 'buyQty': 25, 'buyVal': 6075, 'sellAvg': 229.45, 'sellQty': 25, 'sellVal': 5736.25, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -338.7500000000003, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 134.75, 'fyToken': '101123041348790', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 25, 'cfBuyQty': 0, 'daySellQty': 25, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -338.7500000000003, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:BANKNIFTY2341341000CE', 'id': 'NSE:BANKNIFTY2341341000CE-BO', 'buyAvg': 406.6, 'buyQty': 50, 'buyVal': 20330, 'sellAvg': 408.575, 'sellQty': 50, 'sellVal': 20428.75, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': 98.7499999999983, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 323.95, 'fyToken': '101123041348798', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': 98.7499999999983, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:MARUTI-EQ', 'id': 'NSE:MARUTI-EQ-BO', 'buyAvg': 8408.55, 'buyQty': 1, 'buyVal': 8408.55, 'sellAvg': 8381.9, 'sellQty': 1, 'sellVal': 8381.9, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -26.649999999999636, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 8514.95, 'fyToken': '101000000010999', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 1, 'cfBuyQty': 0, 'daySellQty': 1, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -26.649999999999636, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:NIFTY2341317600CE', 'id': 'NSE:NIFTY2341317600CE-BO', 'buyAvg': 92.2, 'buyQty': 50, 'buyVal': 4610, 'sellAvg': 0, 'sellQty': 0, 'sellVal': 0, 'netAvg': 92.2, 'netQty': 50, 'side': 1, 'qty': 50, 'productType': 'BO', 'realized_profit': 0, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 94.1, 'fyToken': '101123041349138', 'exchange': '10', 'unrealized_profit': 94.99999999999957, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 0, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': 94.99999999999957, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:SBIN-EQ', 'id': 'NSE:SBIN-EQ-BO', 'buyAvg': 531.2753581661891, 'buyQty': 349, 'buyVal': 185415.1, 'sellAvg': 530.8627507163324, 'sellQty': 349, 'sellVal': 185271.1, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -144.0000000000059, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 527.95, 'fyToken': '10100000003045', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 349, 'cfBuyQty': 0, 'daySellQty': 349, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -144.0000000000059, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:POWERGRID-EQ', 'id': 'NSE:POWERGRID-EQ-BO', 'buyAvg': 227.2, 'buyQty': 45, 'buyVal': 10224, 'sellAvg': 226.4, 'sellQty': 45, 'sellVal': 10188, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -35.99999999999923, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 224.85, 'fyToken': '101000000014977', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 45, 'cfBuyQty': 0, 'daySellQty': 45, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -35.99999999999923, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:HDFC-EQ', 'id': 'NSE:HDFC-EQ-BO', 'buyAvg': 2713.285714285714, 'buyQty': 14, 'buyVal': 37986, 'sellAvg': 2709.3142857142857, 'sellQty': 14, 'sellVal': 37930.4, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -55.599999999999454, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 2731.85, 'fyToken': '10100000001330', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 14, 'cfBuyQty': 0, 'daySellQty': 14, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -55.599999999999454, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:NIFTY2341317600PE', 'id': 'NSE:NIFTY2341317600PE-BO', 'buyAvg': 119.5, 'buyQty': 50, 'buyVal': 5975, 'sellAvg': 113.8, 'sellQty': 50, 'sellVal': 5690, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -285.0000000000001, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 90.85, 'fyToken': '101123041349141', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -285.0000000000001, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:HDFCBANK-EQ', 'id': 'NSE:HDFCBANK-EQ-BO', 'buyAvg': 1660.3307692307694, 'buyQty': 26, 'buyVal': 43168.6, 'sellAvg': 1656.3115384615385, 'sellQty': 26, 'sellVal': 43064.1, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -104.50000000000455, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 1667, 'fyToken': '10100000001333', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 26, 'cfBuyQty': 0, 'daySellQty': 26, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -104.50000000000455, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:TATAMOTORS-EQ', 'id': 'NSE:TATAMOTORS-EQ-BO', 'buyAvg': 438.45, 'buyQty': 1, 'buyVal': 438.45, 'sellAvg': 0, 'sellQty': 0, 'sellVal': 0, 'netAvg': 438.45, 'netQty': 1, 'side': 1, 'qty': 1, 'productType': 'BO', 'realized_profit': 0, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 436.75, 'fyToken': '10100000003456', 'exchange': '10', 'unrealized_profit': -1.6999999999999886, 'dayBuyQty': 1, 'cfBuyQty': 0, 'daySellQty': 0, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -1.6999999999999886, 'slNo': 0, 'avgPrice': 0}]
    print(current)

    
# currentPosition()

def tradess():
    
    positions=login.fyers.tradebook()
    print(positions)
# {'symbol': 'NSE:BANKNIFTY2341341000CE', 'id': 'NSE:BANKNIFTY2341341000CE-BO', 'buyAvg': 406.6, 'buyQty': 50, 'buyVal': 20330, 'sellAvg': 408.575, 'sellQty': 50, 'sellVal': 20428.75, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': 98.7499999999983, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 313.65, 'fyToken': '101123041348798', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': 98.7499999999983, 'slNo': 0, 'avgPrice': 0}

# ERR: logEntryFunc: positions : [Errno 13] Permission denied: '/2023-04-06.txt'
# [{'symbol': 'NSE:BANKNIFTY2341340700PE', 'id': 'NSE:BANKNIFTY2341340700PE-BO', 'buyAvg': 243, 'buyQty': 25, 'buyVal': 6075, 'sellAvg': 229.45, 'sellQty': 25, 'sellVal': 5736.25, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -338.7500000000003, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 134.75, 'fyToken': '101123041348790', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 25, 'cfBuyQty': 0, 'daySellQty': 25, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -338.7500000000003, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:BANKNIFTY2341341000CE', 'id': 'NSE:BANKNIFTY2341341000CE-BO', 'buyAvg': 406.6, 'buyQty': 50, 'buyVal': 20330, 'sellAvg': 408.575, 'sellQty': 50, 'sellVal': 20428.75, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': 98.7499999999983, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 323.95, 'fyToken': '101123041348798', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': 98.7499999999983, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:MARUTI-EQ', 'id': 'NSE:MARUTI-EQ-BO', 'buyAvg': 8408.55, 'buyQty': 1, 'buyVal': 8408.55, 'sellAvg': 8381.9, 'sellQty': 1, 'sellVal': 8381.9, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -26.649999999999636, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 8514.95, 'fyToken': '101000000010999', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 1, 'cfBuyQty': 0, 'daySellQty': 1, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -26.649999999999636, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:NIFTY2341317600CE', 'id': 'NSE:NIFTY2341317600CE-BO', 'buyAvg': 92.2, 'buyQty': 50, 'buyVal': 4610, 'sellAvg': 0, 'sellQty': 0, 'sellVal': 0, 'netAvg': 92.2, 'netQty': 50, 'side': 1, 'qty': 50, 'productType': 'BO', 'realized_profit': 0, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 94.1, 'fyToken': '101123041349138', 'exchange': '10', 'unrealized_profit': 94.99999999999957, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 0, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': 94.99999999999957, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:SBIN-EQ', 'id': 'NSE:SBIN-EQ-BO', 'buyAvg': 531.2753581661891, 'buyQty': 349, 'buyVal': 185415.1, 'sellAvg': 530.8627507163324, 'sellQty': 349, 'sellVal': 185271.1, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -144.0000000000059, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 527.95, 'fyToken': '10100000003045', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 349, 'cfBuyQty': 0, 'daySellQty': 349, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -144.0000000000059, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:POWERGRID-EQ', 'id': 'NSE:POWERGRID-EQ-BO', 'buyAvg': 227.2, 'buyQty': 45, 'buyVal': 10224, 'sellAvg': 226.4, 'sellQty': 45, 'sellVal': 10188, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -35.99999999999923, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 224.85, 'fyToken': '101000000014977', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 45, 'cfBuyQty': 0, 'daySellQty': 45, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -35.99999999999923, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:HDFC-EQ', 'id': 'NSE:HDFC-EQ-BO', 'buyAvg': 2713.285714285714, 'buyQty': 14, 'buyVal': 37986, 'sellAvg': 2709.3142857142857, 'sellQty': 14, 'sellVal': 37930.4, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -55.599999999999454, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 2731.85, 'fyToken': '10100000001330', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 14, 'cfBuyQty': 0, 'daySellQty': 14, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -55.599999999999454, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:NIFTY2341317600PE', 'id': 'NSE:NIFTY2341317600PE-BO', 'buyAvg': 119.5, 'buyQty': 50, 'buyVal': 5975, 'sellAvg': 113.8, 'sellQty': 50, 'sellVal': 5690, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -285.0000000000001, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '11', 'ltp': 90.85, 'fyToken': '101123041349141', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 50, 'cfBuyQty': 0, 'daySellQty': 50, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -285.0000000000001, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:HDFCBANK-EQ', 'id': 'NSE:HDFCBANK-EQ-BO', 'buyAvg': 1660.3307692307694, 'buyQty': 26, 'buyVal': 43168.6, 'sellAvg': 1656.3115384615385, 'sellQty': 26, 'sellVal': 43064.1, 'netAvg': 0, 'netQty': 0, 'side': 0, 'qty': 0, 'productType': 'BO', 'realized_profit': -104.50000000000455, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 1667, 'fyToken': '10100000001333', 'exchange': '10', 'unrealized_profit': 0, 'dayBuyQty': 26, 'cfBuyQty': 0, 'daySellQty': 26, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -104.50000000000455, 'slNo': 0, 'avgPrice': 0}, {'symbol': 'NSE:TATAMOTORS-EQ', 'id': 'NSE:TATAMOTORS-EQ-BO', 'buyAvg': 438.45, 'buyQty': 1, 'buyVal': 438.45, 'sellAvg': 0, 'sellQty': 0, 'sellVal': 0, 'netAvg': 438.45, 'netQty': 1, 'side': 1, 'qty': 1, 'productType': 'BO', 'realized_profit': 0, 'crossCurrency': '', 'qtyMulti_com': 1, 'segment': '10', 'ltp': 436.75, 'fyToken': '10100000003456', 'exchange': '10', 'unrealized_profit': -1.6999999999999886, 'dayBuyQty': 1, 'cfBuyQty': 0, 'daySellQty': 0, 'cfSellQty': 0, 'rbiRefRate': 1, 'pl': -1.6999999999999886, 'slNo': 0, 'avgPrice': 0}]

# ERR: logEntryFunc: tradebook : [Errno 13] Permission denied: '/2023-04-06.txt'
# {'s': 'ok', 'code': 200, 'message': '', 'tradeBook': [{'tradeNumber': '23040600052767-50564230', 'orderNumber': '23040600052767-BO-1', 'tradedQty': 1, 'tradePrice': 8381.9, 'tradeValue': 8381.9, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000003739936', 'orderType': 2, 'side': -1, 'symbol': 'NSE:MARUTI-EQ', 'row': 1680754724, 'orderDateTime': '06-Apr-2023 09:48:44', 'fyToken': '101000000010999', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600120698-76285212', 'orderNumber': '23040600120698-BO-2', 'tradedQty': 42, 'tradePrice': 530.7, 'tradeValue': 22289.4, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007097322', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757610, 'orderDateTime': '06-Apr-2023 10:36:50', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600071863-25824622', 'orderNumber': '23040600071863-BO-1', 'tradedQty': 1, 'tradePrice': 1658.1, 'tradeValue': 1658.1, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004941752', 'orderType': 2, 'side': 1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680755635, 'orderDateTime': '06-Apr-2023 10:03:55', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600071863-25824623', 'orderNumber': '23040600071863-BO-1', 'tradedQty': 2, 'tradePrice': 1658.1, 'tradeValue': 3316.2, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004941752', 'orderType': 2, 'side': 1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680755635, 'orderDateTime': '06-Apr-2023 10:03:55', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600059932-50629224', 'orderNumber': '23040600059932-BO-1', 'tradedQty': 45, 'tradePrice': 226.4, 'tradeValue': 10188, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000004200893', 'orderType': 2, 'side': -1, 'symbol': 'NSE:POWERGRID-EQ', 'row': 1680755083, 'orderDateTime': '06-Apr-2023 09:54:43', 'fyToken': '101000000014977', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600336913-174758219', 'orderNumber': '23040600336913-BO-2', 'tradedQty': 50, 'tradePrice': 113.8, 'tradeValue': 5690, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000062019117', 'orderType': 1, 'side': -1, 'symbol': 'NSE:NIFTY2341317600PE', 'row': 1680769690, 'orderDateTime': '06-Apr-2023 13:59:44', 'fyToken': '101123041349141', 'exchange': '10', 'segment': '11'}, {'tradeNumber': '23040600072188-76744577', 'orderNumber': '23040600072188-BO-2', 'tradedQty': 7, 'tradePrice': 531.5, 'tradeValue': 3720.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000004990936', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680760561, 'orderDateTime': '06-Apr-2023 11:26:01', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600071868-26129732', 'orderNumber': '23040600071868-BO-2', 'tradedQty': 2, 'tradePrice': 1656.3, 'tradeValue': 3312.6, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004941763', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680757077, 'orderDateTime': '06-Apr-2023 10:27:57', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600059933-50851106', 'orderNumber': '23040600059933-BO-2', 'tradedQty': 25, 'tradePrice': 227.2, 'tradeValue': 5680, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000004200899', 'orderType': 1, 'side': 1, 'symbol': 'NSE:POWERGRID-EQ', 'row': 1680756203, 'orderDateTime': '06-Apr-2023 10:13:23', 'fyToken': '101000000014977', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600114590-76201337', 'orderNumber': '23040600114590-BO-2', 'tradedQty': 50, 'tradePrice': 529.75, 'tradeValue': 26487.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000006699639', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757165, 'orderDateTime': '06-Apr-2023 10:29:25', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600071863-25824621', 'orderNumber': '23040600071863-BO-1', 'tradedQty': 3, 'tradePrice': 1658.1, 'tradeValue': 4974.299999999999, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004941752', 'orderType': 2, 'side': 1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680755635, 'orderDateTime': '06-Apr-2023 10:03:55', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600072185-75884166', 'orderNumber': '23040600072185-BO-1', 'tradedQty': 12, 'tradePrice': 527.95, 'tradeValue': 6335.400000000001, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000004990930', 'orderType': 2, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680755639, 'orderDateTime': '06-Apr-2023 10:03:59', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600057229-26712829', 'orderNumber': '23040600057229-BO-2', 'tradedQty': 2, 'tradePrice': 2707.55, 'tradeValue': 5415.1, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004011716', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFC-EQ', 'row': 1680760167, 'orderDateTime': '06-Apr-2023 11:19:27', 'fyToken': '10100000001330', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600127041-76335503', 'orderNumber': '23040600127041-BO-1', 'tradedQty': 17, 'tradePrice': 531.75, 'tradeValue': 9039.75, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007642820', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757893, 'orderDateTime': '06-Apr-2023 10:41:33', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600136987-344868569', 'orderNumber': '23040600136987-BO-2', 'tradedQty': 25, 'tradePrice': 428.6, 'tradeValue': 10715, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1400000032221338', 'orderType': 1, 'side': -1, 'symbol': 'NSE:BANKNIFTY2341341000CE', 'row': 1680759027, 'orderDateTime': '06-Apr-2023 11:03:19', 'fyToken': '101123041348798', 'exchange': '10', 'segment': '11'}, {'tradeNumber': '23040600127042-76744574', 'orderNumber': '23040600127042-BO-2', 'tradedQty': 17, 'tradePrice': 531.5, 'tradeValue': 9035.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007642834', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680760561, 'orderDateTime': '06-Apr-2023 11:26:01', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600121892-76285424', 'orderNumber': '23040600121892-BO-2', 'tradedQty': 50, 'tradePrice': 530.6, 'tradeValue': 26530, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007189495', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757611, 'orderDateTime': '06-Apr-2023 10:36:51', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600121892-76285425', 'orderNumber': '23040600121892-BO-2', 'tradedQty': 11, 'tradePrice': 530.6, 'tradeValue': 5836.6, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007189495', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757611, 'orderDateTime': '06-Apr-2023 10:36:51', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600057228-25676229', 'orderNumber': '23040600057228-BO-1', 'tradedQty': 4, 'tradePrice': 2706.5, 'tradeValue': 10826, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004011711', 'orderType': 2, 'side': 1, 'symbol': 'NSE:HDFC-EQ', 'row': 1680754975, 'orderDateTime': '06-Apr-2023 09:52:55', 'fyToken': '10100000001330', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600072185-75884167', 'orderNumber': '23040600072185-BO-1', 'tradedQty': 7, 'tradePrice': 527.95, 'tradeValue': 3695.6500000000005, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000004990930', 'orderType': 2, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680755639, 'orderDateTime': '06-Apr-2023 10:03:59', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600119568-76264790', 'orderNumber': '23040600119568-BO-1', 'tradedQty': 61, 'tradePrice': 531.3, 'tradeValue': 32409.299999999996, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007028963', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757500, 'orderDateTime': '06-Apr-2023 10:35:00', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600059933-50851105', 'orderNumber': '23040600059933-BO-2', 'tradedQty': 20, 'tradePrice': 227.2, 'tradeValue': 4544, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000004200899', 'orderType': 1, 'side': 1, 'symbol': 'NSE:POWERGRID-EQ', 'row': 1680756203, 'orderDateTime': '06-Apr-2023 10:13:23', 'fyToken': '101000000014977', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600087632-26129731', 'orderNumber': '23040600087632-BO-2', 'tradedQty': 20, 'tradePrice': 1656.3, 'tradeValue': 33126, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000005461874', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680757077, 'orderDateTime': '06-Apr-2023 10:27:57', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600052768-50728090', 'orderNumber': '23040600052768-BO-2', 'tradedQty': 1, 'tradePrice': 8408.55, 'tradeValue': 8408.55, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000003739951', 'orderType': 1, 'side': 1, 'symbol': 'NSE:MARUTI-EQ', 'row': 1680755627, 'orderDateTime': '06-Apr-2023 10:03:47', 'fyToken': '101000000010999', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600099330-344552117', 'orderNumber': '23040600099330-BO-1', 'tradedQty': 25, 'tradePrice': 400, 'tradeValue': 10000, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1400000020566968', 'orderType': 1, 'side': 1, 'symbol': 'NSE:BANKNIFTY2341341000CE', 'row': 1680756321, 'orderDateTime': '06-Apr-2023 10:15:45', 'fyToken': '101123041348798', 'exchange': '10', 'segment': '11'}, {'tradeNumber': '23040600057229-26712828', 'orderNumber': '23040600057229-BO-2', 'tradedQty': 2, 'tradePrice': 2707.65, 'tradeValue': 5415.3, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004011716', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFC-EQ', 'row': 1680760167, 'orderDateTime': '06-Apr-2023 11:19:27', 'fyToken': '10100000001330', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600127046-76744571', 'orderNumber': '23040600127046-BO-2', 'tradedQty': 21, 'tradePrice': 531.5, 'tradeValue': 11161.5, 'productType': 'BO', 'clientId

tradess()


# def orders():
#     orders=login.fyers.tradebook()['tradeBook']
    
#     for ord in orders:
#         if ord[]
#     scriptOrder=orders['exchangeOrderNo']=='11000000054'
#     print(scriptOrder)
#     print(orders)
#     # {'s': 'ok', 'code': 200, 'message': '', 'tradeBook': [{'tradeNumber': '23040600121872-76744572', 'orderNumber': '23040600121872-BO-2', 'tradedQty': 39, 'tradePrice': 531.5, 'tradeValue': 20728.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007187839', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680760561, 'orderDateTime': '06-Apr-2023 11:26:01', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600072188-76744577', 'orderNumber': '23040600072188-BO-2', 'tradedQty': 7, 'tradePrice': 531.5, 'tradeValue': 3720.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000004990936', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680760561, 'orderDateTime': '06-Apr-2023 11:26:01', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600100032-344569763', 'orderNumber': '23040600100032-BO-2', 'tradedQty': 25, 'tradePrice': 388.55, 'tradeValue': 9713.75, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1400000020754373', 'orderType': 1, 'side': -1, 'symbol': 'NSE:BANKNIFTY2341341000CE', 'row': 1680756370, 'orderDateTime': '06-Apr-2023 10:17:28', 'fyToken': '101123041348798', 'exchange': '10', 'segment': '11'}, {'tradeNumber': '23040600092637-76744573', 'orderNumber': '23040600092637-BO-2', 'tradedQty': 30, 'tradePrice': 531.5, 'tradeValue': 15945, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000005624810', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680760561, 'orderDateTime': '06-Apr-2023 11:26:01', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600127041-76335505', 'orderNumber': '23040600127041-BO-1', 'tradedQty': 21, 'tradePrice': 531.8, 'tradeValue': 11167.8, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007642820', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757893, 'orderDateTime': '06-Apr-2023 10:41:33', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600071866-26050641', 'orderNumber': '23040600071866-BO-2', 'tradedQty': 1, 'tradePrice': 1656.75, 'tradeValue': 1656.75, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004941761', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680756625, 'orderDateTime': '06-Apr-2023 10:20:25', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600120105-76249310', 'orderNumber': '23040600120105-BO-1', 'tradedQty': 42, 'tradePrice': 531.8, 'tradeValue': 22335.6, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007055538', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757420, 'orderDateTime': '06-Apr-2023 10:33:40', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600072185-75884166', 'orderNumber': '23040600072185-BO-1', 'tradedQty': 12, 'tradePrice': 527.95, 'tradeValue': 6335.400000000001, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000004990930', 'orderType': 2, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680755639, 'orderDateTime': '06-Apr-2023 10:03:59', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600071863-25824622', 'orderNumber': '23040600071863-BO-1', 'tradedQty': 1, 'tradePrice': 1658.1, 'tradeValue': 1658.1, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004941752', 'orderType': 2, 'side': 1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680755635, 'orderDateTime': '06-Apr-2023 10:03:55', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600336406-174692272', 'orderNumber': '23040600336406-BO-1', 'tradedQty': 50, 'tradePrice': 119.5, 'tradeValue': 5975, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000061963373', 'orderType': 1, 'side': 1, 'symbol': 'NSE:NIFTY2341317600PE', 'row': 1680769482, 'orderDateTime': '06-Apr-2023 13:54:52', 'fyToken': '101123041349141', 'exchange': '10', 'segment': '11'}, {'tradeNumber': '23040600059932-50629224', 'orderNumber': '23040600059932-BO-1', 'tradedQty': 45, 'tradePrice': 226.4, 'tradeValue': 10188, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000004200893', 'orderType': 2, 'side': -1, 'symbol': 'NSE:POWERGRID-EQ', 'row': 1680755083, 'orderDateTime': '06-Apr-2023 09:54:43', 'fyToken': '101000000014977', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600136671-344767314', 'orderNumber': '23040600136671-BO-1', 'tradedQty': 25, 'tradePrice': 413.2, 'tradeValue': 10330, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1400000032101928', 'orderType': 1, 'side': 1, 'symbol': 'NSE:BANKNIFTY2341341000CE', 'row': 1680758369, 'orderDateTime': '06-Apr-2023 10:49:44', 'fyToken': '101123041348798', 'exchange': '10', 'segment': '11'}, {'tradeNumber': '23040600052768-50728090', 'orderNumber': '23040600052768-BO-2', 'tradedQty': 1, 'tradePrice': 8408.55, 'tradeValue': 8408.55, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000003739951', 'orderType': 1, 'side': 1, 'symbol': 'NSE:MARUTI-EQ', 'row': 1680755627, 'orderDateTime': '06-Apr-2023 10:03:47', 'fyToken': '101000000010999', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600120105-76249216', 'orderNumber': '23040600120105-BO-1', 'tradedQty': 5, 'tradePrice': 531.8, 'tradeValue': 2659, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007055538', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757419, 'orderDateTime': '06-Apr-2023 10:33:39', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600059933-50851106', 'orderNumber': '23040600059933-BO-2', 'tradedQty': 25, 'tradePrice': 227.2, 'tradeValue': 5680, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1200000004200899', 'orderType': 1, 'side': 1, 'symbol': 'NSE:POWERGRID-EQ', 'row': 1680756203, 'orderDateTime': '06-Apr-2023 10:13:23', 'fyToken': '101000000014977', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600086766-25959916', 'orderNumber': '23040600086766-BO-2', 'tradedQty': 10, 'tradePrice': 2710, 'tradeValue': 27100, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000005418634', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFC-EQ', 'row': 1680756173, 'orderDateTime': '06-Apr-2023 10:12:53', 'fyToken': '10100000001330', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600120679-76285211', 'orderNumber': '23040600120679-BO-2', 'tradedQty': 5, 'tradePrice': 530.7, 'tradeValue': 2653.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007096340', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757610, 'orderDateTime': '06-Apr-2023 10:36:50', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600119568-76264564', 'orderNumber': '23040600119568-BO-1', 'tradedQty': 39, 'tradePrice': 531.3, 'tradeValue': 20720.699999999997, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007028963', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757499, 'orderDateTime': '06-Apr-2023 10:34:59', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600086384-25899443', 'orderNumber': '23040600086384-BO-1', 'tradedQty': 10, 'tradePrice': 2716, 'tradeValue': 27160, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000005400191', 'orderType': 1, 'side': 1, 'symbol': 'NSE:HDFC-EQ', 'row': 1680755894, 'orderDateTime': '06-Apr-2023 10:08:14', 'fyToken': '10100000001330', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600087632-26129731', 'orderNumber': '23040600087632-BO-2', 'tradedQty': 20, 'tradePrice': 1656.3, 'tradeValue': 33126, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000005461874', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680757077, 'orderDateTime': '06-Apr-2023 10:27:57', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600120105-76249176', 'orderNumber': '23040600120105-BO-1', 'tradedQty': 53, 'tradePrice': 531.8, 'tradeValue': 28185.399999999998, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007055538', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757419, 'orderDateTime': '06-Apr-2023 10:33:39', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600071868-26129732', 'orderNumber': '23040600071868-BO-2', 'tradedQty': 2, 'tradePrice': 1656.3, 'tradeValue': 3312.6, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000004941763', 'orderType': 1, 'side': -1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680757077, 'orderDateTime': '06-Apr-2023 10:27:57', 'fyToken': '10100000001333', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600127042-76744574', 'orderNumber': '23040600127042-BO-2', 'tradedQty': 17, 'tradePrice': 531.5, 'tradeValue': 9035.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000007642834', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680760561, 'orderDateTime': '06-Apr-2023 11:26:01', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600072186-76744576', 'orderNumber': '23040600072186-BO-2', 'tradedQty': 12, 'tradePrice': 531.5, 'tradeValue': 6378, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000004990934', 'orderType': 1, 'side': -1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680760561, 'orderDateTime': '06-Apr-2023 11:26:01', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600114295-76181670', 'orderNumber': '23040600114295-BO-1', 'tradedQty': 50, 'tradePrice': 531.35, 'tradeValue': 26567.5, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1300000006677072', 'orderType': 1, 'side': 1, 'symbol': 'NSE:SBIN-EQ', 'row': 1680757055, 'orderDateTime': '06-Apr-2023 10:27:35', 'fyToken': '10100000003045', 'exchange': '10', 'segment': '10'}, {'tradeNumber': '23040600087613-25906754', 'orderNumber': '23040600087613-BO-1', 'tradedQty': 20, 'tradePrice': 1661, 'tradeValue': 33220, 'productType': 'BO', 'clientId': 'XU00057', 'exchangeOrderNo': '1100000005460462', 'orderType': 1, 'side': 1, 'symbol': 'NSE:HDFCBANK-EQ', 'row': 1680755922, 'orderDateTime': '06-Apr-2023 10:08:42', 'fyToken': '10100000001333', 'exchange': '10', 'segment':  
# orders()










def data_handling(symbol):
    date = datetime.today().strftime('%Y-%m-%d')
    hist_data = {"symbol":symbol,"resolution":"30","date_format":1,"range_from":date,"range_to":date,"cont_flag":"1"}
    srp = login.fyers.history(hist_data)
    # print(srp)
    hl_data = srp["candles"][0]
    high = hl_data[2] 
    low = hl_data[3]
    # print("High:",high,"  ","Low:",low)
    return high, low
    
def calculate_position_size(price):
    available_capital = get_available_funds() / 4
    quantity = 1
    risk_per_unit = price * 0.003
    max_capital_risk = available_capital * 0.003
    quantity = max_capital_risk / risk_per_unit
    return round(quantity)

    
def get_available_funds():
    try:
        return login.fyers.funds()['fund_limit'][-1]['equityAmount']
    except:
        return 50000

# print(funds())

def place_orders(symbol,h,l):
   
    df = {"symbols":symbol}
    var = login.fyers.quotes(df)["d"]
    ltp = var[0]["v"]['lp']
    
    LSL=round(h*.003)
    SSL=round(l*.003)
    LTR=round(h*.006)
    STR=round(l*.006)
    
    longWithBuffer=buffer_price(h)
    shortWithBuffer= buffer_price(l)
      
    print(f"LTP:{ltp} Low:{l} High:{h} longwithbuff{longWithBuffer} shortbuff{shortWithBuffer}")

    global trades

    if (ltp >= longWithBuffer)  and (trades < 5):
        trades += 1
        symbols.remove(symbol)                   
        print(f'LONG:{symbol} Signal@: {h} Signal with buffer:{shortWithBuffer} Entry@:{ltp} qty:{calculate_position_size(ltp)}')
        # data = {"symbol":symbol,"qty":calculate_position_size(ltp),"type":2,"side":1,"productType":"BO",
        # "limitPrice":0,"stopPrice":0,"validity":"DAY","disclosedQty":0,"offlineOrder":"False",  "stopLoss":LSL,"takeProfit":LTR}
        # response = login.fyers.place_order(data)
        # print(response)
        
    elif (ltp <= shortWithBuffer) and (trades < 5):
        trades += 1
        symbols.remove(symbol)

        print(f'sorted:{symbol} Signal@: {l} Signal with buffer:{shortWithBuffer} Entry@:{ltp} qty:{calculate_position_size(ltp)}')
        # data = {"symbol":symbol,"qty":calculate_position_size(ltp),"type":2,"side":-1,"productType":"BO",
        # "limitPrice":0,"stopPrice":0,"validity":"DAY","disclosedQty":0,"offlineOrder":"False",  "stopLoss":SSL,"takeProfit":STR}
        # response = login.fyers.place_order(data)
        # print(response)
        
    
    else:
        pass


    
    
    
        
    
# start = "09:44:00"    
# end = "15:00:00"
# now = datetime.strftime(datetime.now(),"%H:%M:%S")

# # Check is it need to run a code in range of 9:40 - 3:30
# run = True if ((now>start) & (now<end)) else False

# # next line i added back test
# # run = True 


# if run==False and now<start:
#     x = True
#     while x:
#         # funds()
#         print("Waiting for market to open")
#         time.sleep(30)
#         now = datetime.strftime(datetime.now(),"%H:%M:%S")
#         x = True if now<start else False
#     run = True
    

# while run:
#     print("\nCurrent time","   ",now)
#     for i in symbols:
#         print("\n"+i)
#         # h,l= data_handling(i)
#         # place_orders(i,h,l)
#     print("after delete",symbols)
#     time.sleep(30)
    
#     now = datetime.strftime(datetime.now(),"%H:%M:%S")
#     run = True if ((now>start) & (now<end)) else False




# if now>end:
#     print("\nMarket Closed!")



